:root {
    --primary: #6366f1; --primary-hover: #4f46e5;
    --secondary: #ec4899; --bg-app: #f3f4f6; --bg-card: #ffffff;
    --text-main: #1f2937; --text-light: #6b7280; --sidebar-bg: #111827;
    --success: #10b981; --danger: #ef4444;
    --radius: 16px; --shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    --font-heading: 'Poppins', sans-serif; --font-body: 'Inter', sans-serif;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:var(--font-body); background:var(--bg-app); color:var(--text-main); height:100vh; overflow:hidden; display:flex; flex-direction:column; }
.hidden { display:none !important; }
.w-100 { width:100%; } .mt-20 { margin-top:20px; } .mb-20 { margin-bottom:20px; }
.text-muted { color:var(--text-light); font-size:0.9rem; margin-bottom:15px; }

/* ANIMATION */
.fade-up { animation: fadeUp 0.4s ease-out; }
.fade-in { animation: fadeIn 0.3s ease-out; }
@keyframes fadeUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

/* LOGIN */
#login-screen { position:fixed; inset:0; z-index:1000; display:flex; justify-content:center; align-items:center; }
#login-bg { position:absolute; inset:0; z-index:-1; background-size:cover; background-position:center; transition:0.5s; }
.bg-default { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.rgb-anim { background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab); background-size:400% 400%; animation:gradientBG 15s ease infinite; }
@keyframes gradientBG { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; } }
.login-card { background:rgba(255,255,255,0.85); backdrop-filter:blur(20px); padding:40px; width:400px; border-radius:24px; box-shadow:0 25px 50px -12px rgba(0,0,0,0.25); text-align:center; border:1px solid rgba(255,255,255,0.4); }
.logo-area { width:60px; height:60px; background:var(--primary); color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px; margin:0 auto 15px; box-shadow:0 10px 20px rgba(99,102,241,0.3); }
.login-card h1 { font-family:var(--font-heading); color:#111; margin-bottom:5px; }
.subtitle { color:var(--text-light); margin-bottom:30px; font-size:0.9rem; }
.input-group { position:relative; margin-bottom:15px; }
.input-group i { position:absolute; left:15px; top:50%; transform:translateY(-50%); color:#9ca3af; }
.login-input { width:100%; padding:14px 14px 14px 45px; border:2px solid #e5e7eb; border-radius:12px; outline:none; transition:0.3s; background:#f9fafb; font-family:var(--font-body); }
.login-input:focus { border-color:var(--primary); background:white; box-shadow:0 0 0 4px rgba(99,102,241,0.1); }
#login-msg { color:var(--danger); font-size:0.9rem; min-height:20px; margin-bottom:10px; font-weight:500; }
.login-footer { margin-top:25px; display:flex; justify-content:center; gap:10px; font-size:0.75rem; }
.tag { padding:4px 8px; border-radius:6px; background:#f3f4f6; color:#666; font-weight:500; }

/* LAYOUT */
.app-container { display:flex; width:100%; height:100%; }
.sidebar { width:280px; background:var(--sidebar-bg); color:#9ca3af; display:flex; flex-direction:column; padding:25px 15px; flex-shrink:0; }
.brand { display:flex; align-items:center; gap:12px; padding:0 10px 30px; color:white; font-family:var(--font-heading); font-size:1.25rem; font-weight:700; border-bottom:1px solid #374151; margin-bottom:20px; }
.brand-icon { width:36px; height:36px; background:linear-gradient(135deg, var(--primary), var(--secondary)); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:18px; }
.menu { flex:1; display:flex; flex-direction:column; gap:5px; }
.menu-item { padding:14px 20px; border-radius:12px; cursor:pointer; display:flex; align-items:center; gap:12px; transition:0.2s; font-weight:500; }
.menu-item:hover { background:rgba(255,255,255,0.05); color:white; }
.menu-item.active { background:var(--primary); color:white; box-shadow:0 10px 20px -5px rgba(99,102,241,0.4); }
.sidebar-footer { border-top:1px solid #374151; padding-top:20px; margin-top:20px; }
.logout-btn { color:var(--danger) !important; }
.logout-btn:hover { background:rgba(239,68,68,0.1) !important; }

.main-content { flex:1; background:var(--bg-app); padding:30px; overflow-y:auto; }
.top-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; }
.welcome-text h3 { font-family:var(--font-heading); font-size:1.5rem; color:#111; }
.user-profile img { width:45px; height:45px; border-radius:50%; border:3px solid white; box-shadow:var(--shadow); }

/* COMPONENTS */
.card-panel { background:white; padding:25px; border-radius:var(--radius); box-shadow:var(--shadow); margin-bottom:25px; border:1px solid rgba(0,0,0,0.02); }
.card-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
.card-header h3 { font-family:var(--font-heading); font-size:1.1rem; }
.add-user-form { display:grid; grid-template-columns:2fr 1fr 1fr auto; gap:10px; align-items:center; background:#f9fafb; padding:15px; border-radius:12px; border:1px solid #e5e7eb; }
.btn { padding:12px 24px; border-radius:10px; border:none; font-weight:600; cursor:pointer; transition:0.2s; font-family:var(--font-body); display:inline-flex; align-items:center; justify-content:center; gap:8px; }
.btn:active { transform:scale(0.98); } .btn-block { width:100%; } .btn-sm { padding:8px 16px; font-size:0.9rem; }
.btn-primary { background:var(--primary); color:white; box-shadow:0 4px 12px rgba(99,102,241,0.3); } .btn-primary:hover { background:var(--primary-hover); }
.btn-secondary { background:#e5e7eb; color:#374151; } .btn-secondary:hover { background:#d1d5db; }
.btn-danger { background:#fee2e2; color:var(--danger); } .btn-danger:hover { background:#fecaca; }
.btn-outline { background:white; border:1px solid #d1d5db; color:#374151; }
.modern-input, .modern-textarea { padding:10px 15px; border:1px solid #e5e7eb; border-radius:8px; outline:none; transition:0.2s; background:#fff; font-family:var(--font-body); }
.modern-input:focus, .modern-textarea:focus { border-color:var(--primary); box-shadow:0 0 0 3px rgba(99,102,241,0.1); }
.modern-textarea { width:100%; height:100px; resize:none; }
.table-responsive { overflow-x:auto; }
.modern-table { width:100%; border-collapse:separate; border-spacing:0; }
.modern-table th { text-align:left; padding:15px; color:var(--text-light); font-weight:600; font-size:0.85rem; text-transform:uppercase; border-bottom:2px solid #f3f4f6; }
.modern-table td { padding:15px; border-bottom:1px solid #f3f4f6; font-size:0.95rem; }
.badge { padding:6px 12px; border-radius:20px; font-size:0.75rem; font-weight:700; }
.bg-green { background:#d1fae5; color:#065f46; } .bg-red { background:#fee2e2; color:#991b1b; }
.grid-2-col { display:grid; grid-template-columns:1fr 1fr; gap:25px; }
.setting-group-vertical { display:flex; flex-direction:column; gap:10px; }
.radio-row { display:flex; align-items:center; gap:10px; padding:15px; border:2px solid #e5e7eb; border-radius:12px; cursor:pointer; transition:0.2s; }
.radio-row:hover { background:#f9fafb; border-color:#d1d5db; } .radio-row:has(input:checked) { border-color:var(--primary); background:#eef2ff; }
.radio-row input:checked + .radio-label { color:var(--primary); font-weight:600; }

/* --- SUBJECT & CHAPTER --- */
.subject-section { background:white; border-radius:24px; padding:30px; margin-bottom:40px; box-shadow:0 4px 20px rgba(0,0,0,0.05); border:1px solid rgba(0,0,0,0.02); }
.subject-header { display:flex; align-items:center; gap:20px; margin-bottom:25px; padding-bottom:20px; border-bottom:2px solid #f3f4f6; }
.sub-icon-box { width:60px; height:60px; background:#eef2ff; color:var(--primary); font-size:30px; border-radius:16px; display:flex; align-items:center; justify-content:center; }
.sub-info h2 { font-family:var(--font-heading); font-size:1.5rem; color:#111; margin-bottom:5px; }
.sub-info span { color:var(--text-light); font-size:0.9rem; background:#f3f4f6; padding:4px 10px; border-radius:20px; }
.chapter-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:20px; }
.chapter-card { background:#fff; border:2px solid #f3f4f6; border-radius:16px; padding:20px; cursor:pointer; transition:0.3s; position:relative; display:flex; flex-direction:column; justify-content:space-between; min-height:160px; }
.chapter-card:hover { border-color:var(--primary); transform:translateY(-5px); box-shadow:0 15px 30px rgba(99,102,241,0.15); }
.chap-num { font-size:3rem; font-weight:900; color:#f9fafb; position:absolute; top:10px; right:20px; z-index:0; }
.chap-content { position:relative; z-index:1; }
.chapter-card h4 { font-family:var(--font-heading); font-size:1.1rem; margin-bottom:10px; color:#374151; line-height:1.4; }
.chap-meta { font-size:0.85rem; color:var(--text-light); display:flex; align-items:center; gap:5px; }
.chap-action { margin-top:20px; z-index:1; }
.btn-start { background:#eef2ff; color:var(--primary); border:none; padding:8px 15px; border-radius:8px; font-weight:600; font-size:0.85rem; transition:0.2s; width:100%; cursor:pointer; }
.chapter-card:hover .btn-start { background:var(--primary); color:white; }

/* --- QUIZ --- */
.quiz-container { background:white; padding:40px; border-radius:24px; box-shadow:var(--shadow); max-width:800px; margin:0 auto; }
.quiz-option { width:100%; text-align:left; padding:18px 20px; margin:12px 0; border:2px solid #f3f4f6; background:white; border-radius:12px; cursor:pointer; transition:0.2s; display:flex; align-items:center; line-height:1.5; font-size: 1rem; }
.quiz-option:hover { border-color:var(--primary); background:#f5f3ff; color:var(--primary); }

.modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); backdrop-filter:blur(4px); z-index:2000; display:flex; justify-content:center; align-items:center; }
.notification-box { background:white; padding:30px; border-radius:24px; width:450px; text-align:center; box-shadow:0 20px 25px -5px rgba(0,0,0,0.1); }
.modal-icon { width:60px; height:60px; background:#eef2ff; color:var(--primary); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px; margin:0 auto 15px; }
.modal-actions { display:flex; gap:10px; margin-top:20px; justify-content:flex-end; }

/* --- MỚI: HIỆU ỨNG CHUỘT CHO MÁY TÍNH --- */
.cursor-particle {
    position: fixed; pointer-events: none; border-radius: 50%;
    width: 8px; height: 8px; z-index: 9999;
    animation: fadeOutParticle 0.8s forwards;
    box-shadow: 0 0 10px rgba(99,102,241,0.5);
}
@keyframes fadeOutParticle { to { opacity: 0; transform: translateY(15px) scale(0); } }

/* --- MỚI: THANH TIẾN ĐỘ --- */
.progress-container { background: white; padding: 20px; border-radius: 20px; margin-bottom: 25px; box-shadow: var(--shadow); max-width: 800px; margin-left: auto; margin-right: auto; }
.progress-info { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 600; font-size: 1rem; }
.progress-bar-bg { height: 12px; background: #f3f4f6; border-radius: 10px; overflow: hidden; }
.progress-fill { width: 0%; height: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary)); transition: width 0.5s ease; border-radius: 10px; }

/* --- MỚI: HIỆU ỨNG ĐÁP ÁN 2 GIÂY --- */
.quiz-option.correct { 
    background: #d1fae5 !important; border-color: #10b981 !important; 
    color: #065f46; font-weight: 700; animation: bounce 0.5s; 
}
.quiz-option.wrong { 
    background: #fee2e2 !important; border-color: #ef4444 !important; 
    color: #991b1b; animation: shake 0.4s;
}
.quiz-option.hidden-fade { opacity: 0.15; transform: scale(0.98); pointer-events: none; filter: grayscale(100%); }

@keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

/* --- MỚI: NÚT NHẠC --- */
.btn-music { padding: 8px 16px; border-radius: 12px; border: 1px solid #e5e7eb; background: white; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: 0.3s; color: var(--text-light); }
.btn-music:hover { background: #f9fafb; }
.btn-music.playing { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border-color: transparent; box-shadow: 0 5px 15px rgba(99,102,241,0.3); animation: pulse 2s infinite; }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(99, 102, 241, 0); } 100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); } }